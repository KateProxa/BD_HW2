# ETL Pipeline с использованием Apache Airflow

Проект реализует ETL pipeline для расчёта витрины активности клиентов.

Процесс включает извлечение данных, их трансформацию и сохранение результатов. Система построена на основе Apache Airflow.

## Структура проекта

```
.
├── dags/                      # DAG файлы
│   ├── dag.py                 # DAG файл для Airflow
├── data/                      # Данные для обработки
│   ├── profit_table.csv       # Входной файл с данными о транзакциях 
(в данный момент из-за ограничения размеров сжат в архив profit_table.rar, перед использованием необходимо разархивировать)
│   └── flags_activity.csv     # Выходной файл с результатами
├── logs/                      # Логи 
├── scripts/                   # Скрипты
│   └── transform_script.py    # Скрипт для трансформации данных
├── .env                       # Файл для управления переменными окружения
├── docker-compose.yaml        # Конфигурационный файл для управления контейнерами
├── Dockerfile                 # Конфигурационный файл для сборки контейнера
├── requirements.txt           # Зависимости Python
└── README.md                  # Документация
```

## Запуск

1. Склонировать репозиторий:

     `git clone <ссылка>`

2. Собрать Docker-образ:

    `docker build --no-cache -t cv-airflow .`

3. Запустить контейнеры с помощью Docker Compose:

    `docker-compose up -d`

4. Перейти в веб-интерфейс Airflow:
    
     `http://localhost:8080`

5. Авторизоваться в системе:

    логин `airflow`\
    пароль `airflow`

## Описание процесса

1. Extract (Извлечение)

    Данные загружаются из файла `profit_table.csv`.

2. Transform (Трансформация)

    Трансформация данных выполняется с использованием предоставленного скрипта `transform_script.py`.

3. Load (Загрузка)

    Результаты сохраняются в файл `flags_activity.csv`. Новые данные добавляются к существующим без перезаписи.

## Скриншоты

Успешный запуск на главной странице

![Успешный запуск на главной странице](/screen/homepage.jpg)

Скрин графа в Airflow

![Скрин графа в Airflow](/screen/graph.jpg)
---
